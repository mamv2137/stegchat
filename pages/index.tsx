import type { NextPage } from 'next';
import Head from 'next/head';
import { Button } from '@chakra-ui/react';

import { useMoralis, useERC20Balances } from 'react-moralis';

const Home: NextPage = () => {
  const { authenticate, authError, isAuthenticated, logout, user } =
    useMoralis();

  const handleAuth = () => {
    authenticate({
      chainId: 56,
      signingMessage: 'Que lo que vale',
    });
  };

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {isAuthenticated ? (
        <>
          <Button onClick={logout}>log out</Button>
          <pre>{JSON.stringify(user, null, 2)}</pre>
        </>
      ) : (
        <Button onClick={handleAuth}>Login</Button>
      )}

      {authError ? <div>{authError.message}</div> : null}
    </div>
  );
};

export default Home;
